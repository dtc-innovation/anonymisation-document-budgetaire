(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Occultation Article L311-7 CRPA";Array.from(e.getElementsByTagName("PROVISION")).forEach(function(e){var a=e.getElementsByTagName("LibNatProv")[0];a&&a.setAttribute("V",t);var r=e.getElementsByTagName("LibObjProv")[0];r&&r.setAttribute("V",t)}),Array.from(e.getElementsByTagName("PERSONNEL")).forEach(function(e){var a=e.getElementsByTagName("RemunAgent")[0];a&&a.setAttribute("V",t)}),Array.from(e.getElementsByTagName("ORGANISME_ENG")).forEach(function(e){var a=e.getElementsByTagName("NomOrgEng")[0];a&&a.setAttribute("V",t);var r=e.getElementsByTagName("RSOrgEng")[0];r&&r.setAttribute("V",t)}),Array.from(e.getElementsByTagName("CONCOURS")).forEach(function(e){var a=e.getElementsByTagName("CodNatJurBenefCA")[0];if(!a||a.getAttribute("V")===CodNatJurBenefPersonnesPhysiques){var r=e.getElementsByTagName("LibOrgaBenef")[0];r&&r.setAttribute("V",t);var m=e.getElementsByTagName("DenomOuNumSubv")[0];m&&m.setAttribute("V",t);var n=e.getElementsByTagName("LibPrestaNat")[0];n&&n.setAttribute("V",t);var g=e.getElementsByTagName("ObjSubv")[0];g&&g.setAttribute("V",t)}}),Array.from(e.getElementsByTagName("PRET")).forEach(function(e){var a=e.getElementsByTagName("NomBenefPret")[0];a&&a.setAttribute("V",t)}),Array.from(e.getElementsByTagName("AUTRE_ENGAGEMENT")).forEach(function(e){if("U"!==e.getElementsByTagName("CodTypPersoMorale")[0].getAttribute("V")){var a=e.getElementsByTagName("NomOrgaBenef")[0];a&&a.setAttribute("V",t);var r=e.getElementsByTagName("NatEng")[0];r&&r.setAttribute("V",t)}}),Array.from(e.getElementsByTagName("CREDIT_BAIL")).forEach(function(e){var a=e.getElementsByTagName("LibCredBail")[0];a&&a.setAttribute("V",t)}),Array.from(e.getElementsByTagName("DETTE")).forEach(function(e){var a=e.getElementsByTagName("LibTypDette")[0];a&&a.setAttribute("V",t)});var a=e.getElementsByTagName("BlocBudget")[0];Array.from(a.getElementsByTagName("PJRef")).forEach(function(e){var a=e.getElementsByTagName("NomPJ")[0];a&&a.setAttribute("V",t)}),Array.from(e.getElementsByTagName("Champ_Editeur")).forEach(function(e){e.setAttribute("V",t)}),Array.from(e.getElementsByTagName("MEMBREASA")).forEach(function(e){var a=e.getElementsByTagName("Proprietaire")[0];a&&a.setAttribute("V",t)})};var CodNatJurBenefPersonnesPhysiques="P3";
},{}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){var t=e.indexOf(BEFORE_ENCODING)+BEFORE_ENCODING.length,n=e.indexOf('"',t);return e.slice(t,n)};var BEFORE_ENCODING='encoding="';
},{}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function makeAnonimizedFile(e){return new Promise(function(t,n){var r=new FileReader;r.addEventListener("loadend",function(e){t(r.result)}),r.readAsText(e)}).then(function(t){var n=(0,_detectXMLEncoding2.default)(t);return new Promise(function(t,r){var i=new FileReader;i.addEventListener("loadend",function(e){t(i.result)}),i.readAsText(e,n)})}).then(function(e){return(new DOMParser).parseFromString(e,"text/xml")}).then(function(e){return(0,_index2.default)(e),e}).then(function(e){return(new XMLSerializer).serializeToString(e)})}var _index=require("../../index.js"),_index2=_interopRequireDefault(_index),_detectXMLEncoding=require("./detectXMLEncoding.js"),_detectXMLEncoding2=_interopRequireDefault(_detectXMLEncoding);document.addEventListener("DOMContentLoaded",function(e){var t=document.body.querySelector('.input input[type="file"]'),n=document.body.querySelector(".output");t.addEventListener("change",function(e){var r=Array.from(e.target.files),i=document.createElement("ul");r.forEach(function(e){var t=document.createElement("li");t.textContent=e.name,i.append(t)}),t.replaceWith(i);var o=document.createElement("ul");r.forEach(function(e){var t=e.name,n=document.createElement("li");n.textContent=t,o.append(n),makeAnonimizedFile(e).then(function(e){var r=new Blob([e],{type:"text/xml"}),i=URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("download",t),o.textContent=t,n.innerHTML="",n.append(o)})}),n.append(o)})},{once:!0});
},{"../../index.js":1,"./detectXMLEncoding.js":2}]},{},[3]);
